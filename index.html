<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="OBD2 Sound">
    <meta name="theme-color" content="#1a1a1a">
    <title>OBD2 Sound Simulator</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <h1>ğŸï¸ OBD2 Sound Simulator</h1>
            <div class="status" id="status">
                <span class="status-dot" id="statusDot"></span>
                <span id="statusText">NiepoÅ‚Ä…czony</span>
            </div>
        </header>

        <!-- Connection Section -->
        <section class="card">
            <h2>PoÅ‚Ä…czenie OBD2</h2>
            <button id="connectBtn" class="btn btn-primary">
                ğŸ“¡ PoÅ‚Ä…cz z ELM327
            </button>
            <div id="deviceInfo" class="device-info hidden">
                <p><strong>UrzÄ…dzenie:</strong> <span id="deviceName">-</span></p>
                <button id="disconnectBtn" class="btn btn-secondary">RozÅ‚Ä…cz</button>
            </div>
        </section>

        <!-- Sound Selection -->
        <section class="card">
            <h2>WybÃ³r dÅºwiÄ™ku silnika</h2>
            <div class="sound-selector">
                <button class="sound-btn active" data-sound="v8">
                    <span class="sound-icon">ğŸ”Š</span>
                    <span>V8 Muscle</span>
                </button>
                <button class="sound-btn" data-sound="v6">
                    <span class="sound-icon">ğŸ”Š</span>
                    <span>V6 Sport</span>
                </button>
                <button class="sound-btn" data-sound="2jz">
                    <span class="sound-icon">ğŸ”Š</span>
                    <span>2JZ Turbo</span>
                </button>
                <button class="sound-btn" data-sound="v10">
                    <span class="sound-icon">ğŸ”Š</span>
                    <span>V10 F1</span>
                </button>
            </div>
        </section>

        <!-- RPM Display -->
        <section class="card">
            <h2>Obroty silnika</h2>
           <!-- RPM Display -->
<div class="rpm-section">
    <div class="rpm-display">
        <div id="rpmValue" class="rpm-value">0</div>
        <div class="rpm-label">RPM</div>
    </div>
    <div class="rpm-bar-container">
        <div id="rpmBar" class="rpm-bar"></div>
    </div>
</div>

<!-- NEW: RPM Range Control -->
<div class="rpm-range-section">
    <h3>âš™ï¸ RPM Range</h3>
    
    <div class="rpm-control">
        <label for="minRpmSlider">Min RPM: <span id="minRpmValue">800</span></label>
        <input type="range" id="minRpmSlider" min="500" max="2000" value="800" step="100">
    </div>

    <div class="rpm-control">
        <label for="maxRpmSlider">Max RPM: <span id="maxRpmValue">7000</span></label>
        <input type="range" id="maxRpmSlider" min="3000" max="10000" value="7000" step="100">
    </div>

    <div class="rpm-info">
        <p id="rpmRangeInfo">Range: 800 - 7000 RPM</p>
        <button id="resetRpmBtn" class="btn btn-secondary">ğŸ”„ Reset to Default</button>
    </div>
</div>

<!-- Playback Controls -->
<div class="controls-section">
    <button id="playBtn" class="btn btn-play" disabled>â–¶ï¸ OdtwÃ³rz</button>
    <button id="stopBtn" class="btn btn-stop" disabled>â¹ï¸ Stop</button>
    <button id="testSoundBtn" class="btn btn-secondary">ğŸ”Š Test Sound</button>
</div>
        </section>

        <!-- Controls -->
        <section class="card">
            <h2>Sterowanie</h2>
            <div class="controls">
                <button id="playBtn" class="btn btn-success" disabled>
                    â–¶ï¸ Start
                </button>
                <button id="stopBtn" class="btn btn-danger" disabled>
                    â¹ï¸ Stop
                </button>
            </div>
            
            <div class="volume-control">
                <label for="volumeSlider">ğŸ”Š GÅ‚oÅ›noÅ›Ä‡</label>
                <input type="range" id="volumeSlider" min="0" max="100" value="70">
                <span id="volumeValue">70%</span>
            </div>

            <div class="settings-toggle">
                <label>
                    <input type="checkbox" id="autoStart" checked>
                    Auto-start przy poÅ‚Ä…czeniu
                </label>
            </div>
        </section>
		
		<!-- Effects Control Panel -->
<div class="effects-panel">
    <h3>ğŸ”§ Efekty DÅºwiÄ™ku</h3>
    
    <div class="effect-control">
        <label>
            <input type="checkbox" id="turboToggle" checked>
            ğŸŒªï¸ Turbo Whistle
        </label>
    </div>

    <div class="effect-control">
        <label>
            <input type="checkbox" id="flutterToggle" checked>
            âš¡ Engine Flutter
        </label>
    </div>

    <div class="effect-control">
        <label>
            <input type="checkbox" id="exhaustToggle" checked>
            ğŸ”¥ Exhaust Resonance
        </label>
    </div>

    <div class="effect-control">
        <label>
            <input type="checkbox" id="gearShiftToggle" checked>
            ğŸ”„ Gear Shift Detection
        </label>
    </div>

    <button id="gearShiftBtn" class="btn-secondary">
        ğŸ¬ Test Gear Shift
    </button>
</div>

        <!-- Debug Info -->
        <section class="card debug-section">
            <h2>Diagnostyka</h2>
            <div class="debug-info">
                <div class="debug-row">
                    <span>Bluetooth:</span>
                    <span id="debugBluetooth">-</span>
                </div>
                <div class="debug-row">
                    <span>Audio:</span>
                    <span id="debugAudio">-</span>
                </div>
                <div class="debug-row">
                    <span>Ostatnia komenda:</span>
                    <span id="debugCommand">-</span>
                </div>
                <div class="debug-row">
                    <span>OdpowiedÅº:</span>
                    <span id="debugResponse">-</span>
                </div>
            </div>
            <button id="testSoundBtn" class="btn btn-secondary">ğŸ”Š Test dÅºwiÄ™ku</button>
        </section>

        <!-- Instructions -->
        <section class="card instructions">
            <h2>Instrukcja</h2>
            <ol>
                <li>PodÅ‚Ä…cz adapter ELM327 do portu OBD2 w samochodzie</li>
                <li>WÅ‚Ä…cz zapÅ‚on (nie musisz uruchamiaÄ‡ silnika do testÃ³w)</li>
                <li>Kliknij "PoÅ‚Ä…cz z ELM327" i wybierz urzÄ…dzenie</li>
                <li>Wybierz dÅºwiÄ™k silnika</li>
                <li>Kliknij "Start" - dÅºwiÄ™k bÄ™dzie dostosowany do obrotÃ³w</li>
            </ol>
            <div class="warning">
                âš ï¸ <strong>WaÅ¼ne:</strong> Web Bluetooth ma ograniczone wsparcie na iOS. 
                Najlepiej dziaÅ‚a na Chrome/Android. Na iOS moÅ¼e wymagaÄ‡ 
                zewnÄ™trznej przeglÄ…darki jak <strong>Bluefy</strong>.
            </div>
        </section>

        <!-- Footer -->
        <footer>
            <p>OBD2 Sound Simulator v1.0</p>
            <button id="installBtn" class="btn btn-install hidden">
                ğŸ“² Zainstaluj aplikacjÄ™
            </button>
        </footer>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="spinner"></div>
        <p>ÅÄ…czenie z ELM327...</p>
    </div>

    <script src="app.js"></script>
</body>
</html>
